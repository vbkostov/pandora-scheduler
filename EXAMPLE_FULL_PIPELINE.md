# Example: Running Full Pipeline with Target Definitions

This example demonstrates running the complete pipeline using `run_scheduler.py`, which is the recommended way to execute the scheduler.

## Prerequisites

Before running the pipeline you need:

1. **Target Definition Files** — Clone from [PandoraMission/PandoraTargetList](https://github.com/PandoraMission/PandoraTargetList). Use the `target_definition_files/` directory.
2. **GMAT Ephemeris File** — A spacecraft ephemeris file generated by GMAT.

Neither of these files are distributed with this repository.

## Run Complete Pipeline

Generate everything from scratch:

```bash
poetry run python run_scheduler.py \
    --start "2026-02-05" \
    --end "2026-02-12" \
    --output ./complete_pipeline_run \
    --target-definitions /path/to/PandoraTargetList/target_definition_files \
    --generate-visibility \
    --gmat-ephemeris /path/to/ephemeris.txt \
    --show-progress \
    --verbose
```

This will:
1. Read target definitions from the specified path
2. Generate `*_targets.csv` manifests in `complete_pipeline_run/data/`
3. Generate visibility files for all targets
4. Run the scheduling algorithm
5. Generate schedule CSV and science calendar XML

## Output Structure

```
complete_pipeline_run/
├── data/                                         # Generated from definitions
│   ├── exoplanet_targets.csv                   # Primary targets
│   ├── auxiliary-standard_targets.csv          # Auxiliary targets
│   ├── monitoring-standard_targets.csv         # Monitoring targets
│   ├── occultation-standard_targets.csv        # Occultation targets
│   ├── targets/                                 # Primary visibility data
│   │   └── [StarName]/
│   │       └── [PlanetName]/
│   │           └── Visibility for [PlanetName].parquet
│   └── aux_targets/                             # Auxiliary visibility data
│       └── [StarName]/
│           └── Visibility for [StarName].parquet
├── Pandora_Schedule_0.8_0.0_0.2_2026-02-05_to_2026-02-12.csv
├── Pandora_science_calendar.xml
├── Observation_Time_Report_2026-02-05 00:00:00.csv
├── tracker.csv
└── Tracker_2026-02-05_to_2026-02-12.pkl
```

## Notes

- The first run with `--generate-visibility` will take longer (visibility generation is compute-intensive)
- The `--show-progress` flag shows progress bars for scheduling
- Use `--verbose` to see detailed logging including visibility generation status
 
**Important:** The repository/package does NOT distribute pregenerated visibility files. Running the full pipeline with `--generate-visibility` will create visibility catalogs in the output directory, but you must supply a GMAT ephemeris file via `--gmat-ephemeris` to generate them.
